import discord
from discord.ext import commands

# ======== üîß ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡πÄ‡∏ö‡∏∑‡πâ‡∏≠‡∏á‡∏ï‡πâ‡∏ô ========
TOKEN = "‡πÉ‡∏™‡πà‡πÇ‡∏ó‡πÄ‡∏Ñ‡∏ô‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì‡∏ó‡∏µ‡πà‡∏ô‡∏µ‡πà"  # üëâ ‡∏Å‡∏£‡∏≠‡∏Å Token ‡∏à‡∏≤‡∏Å Discord Developer Portal
GUILD_ID = 123456789012345678      # üëâ ‡∏Å‡∏£‡∏≠‡∏Å Server ID ‡∏Ç‡∏≠‡∏á‡∏î‡∏¥‡∏™‡∏Ñ‡∏≠‡∏£‡πå‡∏î‡∏Ñ‡∏∏‡∏ì
ROLE_NAME = "‡∏ú‡πà‡∏≤‡∏ô‡∏Å‡∏≤‡∏£‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô"       # üëâ ‡∏ä‡∏∑‡πà‡∏≠ Role ‡∏ó‡∏µ‡πà‡∏à‡∏∞‡πÉ‡∏´‡πâ ‡πÄ‡∏ä‡πà‡∏ô "‡∏ú‡πà‡∏≤‡∏ô‡∏Å‡∏≤‡∏£‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô"

# ======== ‚öôÔ∏è ‡∏Å‡∏≥‡∏´‡∏ô‡∏î Intent ========
intents = discord.Intents.default()
intents.members = True
intents.message_content = True

# ======== ü§ñ ‡∏™‡∏£‡πâ‡∏≤‡∏á Bot ========
bot = commands.Bot(command_prefix="!", intents=intents)

# ======== üß† ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡πÄ‡∏ä‡πá‡∏Å‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ï‡∏≤‡∏°‡∏ü‡∏≠‡∏£‡πå‡∏° ========
def is_stickied_format(content):
    return (
        "__**Stickied Message:**__" in content and
        "[ Roblox ]" in content and
        "[ Discord ]" in content and
        "[ ‡∏£‡∏π‡πâ‡∏à‡∏±‡∏Å‡πÅ‡∏°‡∏û‡∏ô‡∏µ‡πâ‡∏à‡∏≤‡∏Å‡πÑ‡∏´‡∏ô ]" in content and
        "[ ‡∏£‡∏π‡∏õ‡∏´‡∏•‡∏±‡∏Å‡∏ê‡∏≤‡∏ô‡∏Å‡∏≤‡∏£‡πÄ‡∏Ç‡πâ‡∏≤‡∏Å‡∏•‡∏∏‡πà‡∏° ]" in content
    )

# ======== ‚úÖ ‡∏ö‡∏≠‡∏ó‡∏≠‡∏≠‡∏ô‡πÑ‡∏•‡∏ô‡πå‡πÅ‡∏•‡πâ‡∏ß ========
@bot.event
async def on_ready():
    print(f"‚úÖ ‡∏ö‡∏≠‡∏ó‡∏≠‡∏≠‡∏ô‡πÑ‡∏•‡∏ô‡πå‡πÅ‡∏•‡πâ‡∏ß‡πÉ‡∏ô‡∏ä‡∏∑‡πà‡∏≠: {bot.user}")

# ======== üì• ‡∏ï‡∏£‡∏ß‡∏à‡∏à‡∏±‡∏ö‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏° ========
@bot.event
async def on_message(message):
    if message.author.bot:
        return

    if is_stickied_format(message.content):
        guild = discord.utils.get(bot.guilds, id=GUILD_ID)
        member = guild.get_member(message.author.id)

        if not member:
            print("‚ùå ‡πÑ‡∏°‡πà‡∏û‡∏ö‡∏™‡∏°‡∏≤‡∏ä‡∏¥‡∏Å‡πÉ‡∏ô‡πÄ‡∏ã‡∏¥‡∏£‡πå‡∏ü‡πÄ‡∏ß‡∏≠‡∏£‡πå")
            return

        role = discord.utils.get(guild.roles, name=ROLE_NAME)
        if not role:
            await message.channel.send(f"‚ùå ‡πÑ‡∏°‡πà‡∏û‡∏ö Role ‡∏ä‡∏∑‡πà‡∏≠ '{ROLE_NAME}'")
            return

        try:
            await member.add_roles(role)
            await message.reply("‚úÖ ‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏ï‡∏±‡∏ß‡πÄ‡∏™‡∏£‡πá‡∏à‡πÅ‡∏•‡πâ‡∏ß ‡πÅ‡∏•‡∏∞‡πÑ‡∏î‡πâ‡∏£‡∏±‡∏ö‡∏ö‡∏ó‡∏ö‡∏≤‡∏ó‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢‡∏Ñ‡∏£‡∏±‡∏ö!")
        except Exception as e:
            print("‚ùå ‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î:", e)
            await message.reply("‚ùå ‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÉ‡∏´‡πâ‡∏ö‡∏ó‡∏ö‡∏≤‡∏ó‡πÑ‡∏î‡πâ")

    await bot.process_commands(message)

# ======== ‚ñ∂Ô∏è ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏£‡∏±‡∏ô‡∏ö‡∏≠‡∏ó ========
bot.run(TOKEN)
